# 템플릿
템플릿이란 코드에서 어떤 부분은 변경을 통해 그 기능이 다양해지고 확장하려는 성질이 있고, 어떤 부분은 고정되어 있고 변하지 않으려는 성질이 있는데 이렇게 바뀌는 성질이 다른 코드 중에서 변경이 거의 일어나지 않으며 일정한 패턴으로 유지되는 특성을 가진 부분을 자유롭게 변경되는 성질을 가진 부분으로부터 독립시켜서 효과적으로 활용할 수 있도록 하는 방법이다.

##### 리소스 반환과 close()
Connection과 PreparedStatement는 보통 풀(pool) 방식으로 운영된다. 미리 정해진 풀 안에 제한된 수의 리소스를 만들어두고 필요할 때 이를 할당하고, 반환하면 다시 풀에 넣는 방식으로 운영된다. 요청이 매우 많은 서버환경에서는 매번 새로운 리소스를 생성하는 대신 풀에 미리 만들어둔 리소스를 돌려가며 사용하는 편이 훨씬 유리하다. 대신 사용한 리소스는 빠르게 반환해야 한다. 그렇지 않으면 풀에 있는 리소스가 고갈되고 결국 문제가 발생한다. close()는 사용된 리소스를 반환해주는 메서드이다.

##### 분리와 재사용을 위한 디자인 패턴 적용
DB커넥션 연결과 같이 Dao에서 지속적으로 사용하는 코드가 메서드 단위로 반복적인 호출이 일어난다. 중복코드를 처리하는 방법으로는 변하는 부분과 변하지 않는 부분을 찾아서 처리하면 된다.
예제로 chapter3의 UserDao 클래스에서 PreparedStatement 의 부분을 제외한 Connection, ResultSet 등의 부분은 변하지 않는다. 원래는 변하지 않는 부분의 코드를 메서드로 만드는 것이 낫지만 변하는 부분이 변하지 않는 부분 중간에 껴있기 때문에 변하는 부분을 메서드로 만들고 하나의 메서드에서 재사용하는 방법으로 리팩토링을 선택하였다.

##### 템플릿 메서드 패턴의 적용
기존에 makeStatement 메서드를 추상메서드로 만들어서 자식클래스에서 재정의한 후 변하지 않는 부분에서 클래스를 호출하여 사용한다. 하지만 장점보다 단점이 더 많이 보인다. Dao 내의 메서드가 많을수록 서브클래스의 개수가 증가하기 때문이다.

##### 전략 패턴의 적용
개방 폐쇄 원칙을 잘 지키는 구조이면서도 템플릿 메서드 패턴보다 유연하고 확장성이 뛰어난 것이, 오브젝트를 아예 둘로 분리하고 클래스 레벨에서는 인터페이스를 통해서만 의존하도록 만드는 전략 패턴이다.