# 1장. IoC 컨테이너와 DI

### IoC 컨테이너 : 빈 팩토리와 애플리케이션 컨텍스트
스프링에선 IoC를 담당하는 컨테이너를 빈 팩토리 또는 애플리케이션 컨텍스트라고 부르기도 한다. 오브젝트 생성과 오브젝트 사이의 런타임 관계를 설정하는 DI 관점으로 볼 떄는 컨테이너를 빈 팩토리라고 한다.

#### 1.1.1 IoC 컨테이너를 이용해 애플리케이션 만들기

##### POJO 클래스
각각의 POJO는 특정 기술과 스펙에서 독립적일뿐더러 의존관계에 있는 다른 POJO와 느슨한 결합을 갖도록 만들어야 한다.

##### 설정 메타정보
스프링의 설정 메타정보는 BeanDefinition 인터페이스로 표현되는 순수한 추상 정보다. 즉 애플리케이션 컨텍스트는 바로 이 BeanDefinition으로 만들어진 메타정보를 담은 오브젝트를 사용해 IoC와 DI 작업을 수행한다.
원본의 포맷과 구조, 자료의 특성에 맞게 읽어와 BeanDefinition 오브젝트로 변환해주는 BeanDefinitionReader가 있으면 된다.

- 빈 메타정보
	- 빈 아이디, 이름, 별칭 : 빈 오브젝트를 구분할 수 있는 식별자
	- 클래스 또는 클래스 이름 : 빈으로 만들 POJO 클래스 또는 서비스 클래스 정보
	- 스코프 : 싱글톤, 프로토타입과 같은 빈의 생성 방식과 존재 범위
	- 프로퍼티 값 또는 참조 : DI에 사용할 프로퍼티 이름과 값 또는 참조하는 빈의 이름
	- 생성자 파라미터 값 또는 참조 : DI에 사용할 생성자 파라미터 이름과 값 또는 참조할 빈의 이름
	- 지연로딩 여부, 우선 빈 여부, 자동와이어링 여부, 부모 빈 정보, 빈팩토리 이름 등

결국 스프링 애플리케이션이란 POJO 클래스와 설정 메타정보를 이용해 IoC컨테이너가 만들어주는 오브젝트 조합이다.


#### 1.1.2 IoC컨테이너의 종류와 사용방법
이미 스프링에는 다양한 용도로 쓸 수 있는 십여 개의 ApplicationContext 구현 클래스가 존재한다. 직접 코드를 통해 ApplicationContext 오브젝트를 생성하는 경우는 거의 없다. 스프링에서 제공하는 ApplicationContext 구현 클래스 종류에 대해 살펴보자.

##### StaticApplicationContext
BeanDefinition 오브젝트를 직접 만들고, 코드를 통해 IoC 컨테이너에 등록하는 방법을 사용해봤다. 이 때 사용하는 컨테이너는 StaticApplicationContext다. StaticApplicationContext는 코드를 통해 빈 메타정보를 등록하기 위해 사용한다.
스프링의 기능에 대한 학습테스트를 제외하면 실제로 사용하지 않는다. 스태틱 애플리케이션 컨텍스트는 실전에서는 사용하면 안 된다. ( 이유에 대해 찾아봤지만 안나와서 코드를 봐보니 기본생성자가 Null로 되어있어서 그런가?? 추후 더 찾아볼 예정 )

#### GenericApplicationContext
GenericApplicationContext는 가장 일반적인 애플리케이션 구현 클래스이다. 실전에서 사용될 수 있는 모든 기능을 갖추고 있으며 컨테이너의 주요 기능을 DI를 통해 확장할 수 있도록 설계되었다. StaticApplicationContext 와는 달리 XML 파일과 같은 외부의 리소스에 있는 빈 설정 메타정보를 리더를 통해 읽어들여서 메타정보로 전환해서 사용한다. 스프링은 XML 말고도 프로퍼티 파일에서 빈 설정 메타정보를 가져오는 PropertiesBeanDefinitionReader도 제공한다.
JUnit 테스트 내에서 사용할 수 있는 애플리케이션 컨텍스트를 자동으로 만들어 주는데 이 컨텍스트가 바로 GenericApplicationContext다.